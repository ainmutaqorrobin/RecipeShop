import{a as S,b as ue,c as G}from"./chunk-67KOIUOG.js";import"./chunk-SOGY64EY.js";import{a as de}from"./chunk-MCLQF2L7.js";import{$ as j,A as m,B as K,Ba as ge,C as f,D as N,E as T,F as Q,G as c,H as E,I as M,K as W,O as y,P as k,X,Y as h,Z as Y,_ as Z,ba as C,da as ee,ea as ie,f as U,fa as te,ga as ne,h as $,ha as re,ia as oe,k as z,l as D,m as P,n as u,na as pe,o as L,oa as ce,p as B,pa as ae,q as H,qa as _,r as x,ra as se,sa as R,t as a,ta as me,u as l,ua as le,v as J,w as s,wa as F,x as g,xa as fe,y as p,ya as ve,z as o}from"./chunk-5MNRTRAW.js";var _e=i=>[i],he=(()=>{let e=class e{constructor(n){this.recipeService=n}ngOnInit(){}};e.\u0275fac=function(t){return new(t||e)(l(S))},e.\u0275cmp=u({type:e,selectors:[["app-recipe-item"]],inputs:{recipe:"recipe",index:"index"},decls:8,vars:7,consts:[["routerLinkActive","active",1,"list-group-item","clearfix",2,"cursor","pointer",3,"routerLink"],[1,"pull-left"],[1,"list-group-item-heading"],[1,"list-group-item-text"],[1,"pull-right"],[1,"img-responsive",2,"max-height","50px",3,"src","alt"]],template:function(t,r){t&1&&(p(0,"a",0)(1,"div",1)(2,"h4",2),c(3),o(),p(4,"p",3),c(5),o()(),p(6,"span",4),m(7,"img",5),o()()),t&2&&(s("routerLink",W(5,_e,r.index)),a(3),E(r.recipe.name),a(2),E(r.recipe.description),a(2),T("alt",r.recipe.name),s("src",r.recipe.imagePath,x))},dependencies:[me,le]});let i=e;return i})();function Ee(i,e){if(i&1&&m(0,"app-recipe-item",4),i&2){let v=e.$implicit,n=e.index;s("recipe",v)("index",n)}}var Se=(()=>{let e=class e{constructor(n,t,r,d){this.recipeService=n,this.router=t,this.route=r,this.dataStorageService=d,this.isLoading=new J}ngOnInit(){this.onLoadingScreen(!0),this.subscription=this.recipeService.recipeChanged.subscribe(n=>{this.recipes=n,this.onLoadingScreen(!1)},n=>{this.onLoadingScreen(!1)}),this.recipes=this.recipeService.getRecipes()}onNewRecipe(){this.router.navigate(["new"],{relativeTo:this.route})}onLoadingScreen(n){this.isLoading.emit(n)}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(t){return new(t||e)(l(S),l(R),l(_),l(ue))},e.\u0275cmp=u({type:e,selectors:[["app-recipe-list"]],outputs:{isLoading:"isLoading"},decls:8,vars:1,consts:[[1,"row"],[1,"col-xs-12"],[1,"btn","btn-success",3,"click"],[3,"recipe","index",4,"ngFor","ngForOf"],[3,"recipe","index"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return r.onNewRecipe()}),c(3,"New Recipe"),o()()(),m(4,"hr"),p(5,"div",0),m(6,"div",1),g(7,Ee,1,2,"app-recipe-item",3),o()),t&2&&(a(7),s("ngForOf",r.recipes))},dependencies:[y,he]});let i=e;return i})();function we(i,e){if(i&1&&m(0,"app-recipe-list",5),i&2){let v=N();s("isLoading",v.isLoading)}}function De(i,e){i&1&&m(0,"app-loading-spinner")}var Ce=(()=>{let e=class e{constructor(){this.isLoading=!1}ngOnInit(){}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u({type:e,selectors:[["app-recipes"]],inputs:{isLoading:"isLoading"},decls:6,vars:2,consts:[[1,"row"],[1,"col-md-5"],[3,"isLoading",4,"ngIf"],[4,"ngIf"],[1,"col-md-7"],[3,"isLoading"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"div",1),g(2,we,1,1,"app-recipe-list",2)(3,De,1,0,"app-loading-spinner",3),o(),p(4,"div",4),m(5,"router-outlet"),o()()),t&2&&(a(2),s("ngIf",!r.isLoading),a(1),s("ngIf",r.isLoading))},dependencies:[se,ve,k,Se]});let i=e;return i})();function Le(i,e){if(i&1&&(p(0,"li",10),c(1),p(2,"b"),c(3,"x"),o(),c(4),o()),i&2){let v=e.$implicit;a(1),M("",v.name," "),a(3),M(" ",v.amount,"")}}var Re=(()=>{let e=class e{constructor(n,t,r){this.recipeService=n,this.route=t,this.router=r}ngOnInit(){this.route.params.subscribe(n=>{this.id=+n.id,this.recipe=this.recipeService.getRecipesFromID(this.id)})}addToShoppingListCart(){this.recipeService.addIngredientsToShoppingList(this.recipe.ingredients)}onEditRecipe(){this.router.navigate(["edit"],{relativeTo:this.route})}onDeleteRecipe(){this.recipeService.deleteRecipe(this.id),this.router.navigate(["/recipes"])}};e.\u0275fac=function(t){return new(t||e)(l(S),l(_),l(R))},e.\u0275cmp=u({type:e,selectors:[["app-recipe-detail"]],decls:30,vars:5,consts:[[1,"row"],[1,"col-xs-12"],[1,"img-responsive",2,"max-height","200px",3,"src","alt"],["appDropdown","",1,"btn-group"],[1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],[2,"cursor","pointer",3,"click"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"div",1),m(2,"img",2),o()(),p(3,"div",0)(4,"div",1)(5,"h1"),c(6),o()()(),p(7,"div",0)(8,"div",1)(9,"div",3)(10,"button",4),c(11,"Manage Recipe "),m(12,"span",5),o(),p(13,"ul",6)(14,"li")(15,"a",7),f("click",function(){return r.addToShoppingListCart()}),c(16,"Add Ingredients to Shopping List"),o()(),p(17,"li")(18,"a",7),f("click",function(){return r.onEditRecipe()}),c(19,"Edit Recipe"),o()(),p(20,"li")(21,"a",7),f("click",function(){return r.onDeleteRecipe()}),c(22,"Delete Recipe"),o()()()()()(),p(23,"div",0)(24,"div",1),c(25),o()(),p(26,"div",0)(27,"div",1)(28,"ul",8),g(29,Le,5,2,"li",9),o()()()),t&2&&(a(2),T("alt",r.recipe.name),s("src",r.recipe.imagePath,x),a(4),E(r.recipe.name),a(19),M(" ",r.recipe.description," "),a(4),s("ngForOf",r.recipe.ingredients))},dependencies:[fe,y]});let i=e;return i})();function Ne(i,e){if(i&1){let v=K();p(0,"div",17)(1,"div",18),m(2,"input",19),o(),p(3,"div",20),m(4,"input",21),o(),p(5,"div",20)(6,"button",4),f("click",function(){let r=B(v).index,d=N();return H(d.onDeleteIngredient(r))}),c(7,"Delete"),o()()()}if(i&2){let v=e.index;s("formGroupName",v)}}var q=(()=>{let e=class e{constructor(n,t,r){this.route=n,this.recipeService=t,this.router=r,this.editMode=!1}get controls(){return this.recipeForm.get("ingredients").controls}ngOnInit(){this.route.params.subscribe(n=>{this.id=+n.id,this.editMode=n.id!=null,this.initForm()})}initForm(){let n="",t="",r="",d=new pe([]);if(this.editMode){let I=this.recipeService.getRecipesFromID(this.id);if(n=I.name,t=I.imagePath,r=I.description,I.ingredients)for(let V of I.ingredients)d.push(new j({name:new C(V.name,h.required),amount:new C(V.amount,[h.required,h.pattern("^[1-9]+[0-9]*$")])}))}this.recipeForm=new j({name:new C(n,h.required),imagePath:new C(t,h.required),description:new C(r,h.required),ingredients:d})}onSubmit(){this.editMode?this.recipeService.updateRecipe(this.id,this.recipeForm.value):this.recipeService.addRecipe(this.recipeForm.value),this.onCancel()}onAddIngredient(){this.recipeForm.get("ingredients").push(new j({name:new C(null,h.required),amount:new C(null,[h.required,h.pattern("^[1-9]+[0-9]*$")])}))}onCancel(){this.router.navigate(["../"],{relativeTo:this.route})}onDeleteIngredient(n){this.recipeForm.get("ingredients").removeAt(n)}};e.\u0275fac=function(t){return new(t||e)(l(_),l(S),l(R))},e.\u0275cmp=u({type:e,selectors:[["app-recipe-edit"]],decls:39,vars:4,consts:[[1,"row"],[1,"col-xs-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["for","imagePath"],["type","text","id","imagePath","formControlName","imagePath",1,"form-control"],["imagePath",""],[1,"img-responsive",3,"src"],["for","description"],["id","description","cols","30","rows","6","formControlName","description",1,"form-control"],["formArrayName","ingredients",1,"col-xs-12"],["class","row","style","margin-top: 10px;",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"click"],[1,"row",2,"margin-top","10px",3,"formGroupName"],[1,"col-xs-8"],["type","text","formControlName","name",1,"form-control"],[1,"col-xs-2"],["type","number","formControlName","amount",1,"form-control"]],template:function(t,r){if(t&1&&(p(0,"div",0)(1,"div",1)(2,"form",2),f("ngSubmit",function(){return r.onSubmit()}),p(3,"div",0)(4,"div",1)(5,"button",3),c(6,"Save"),o(),p(7,"button",4),f("click",function(){return r.onCancel()}),c(8,"Cancel"),o()()(),p(9,"div",0)(10,"div",1)(11,"div",5)(12,"label",6),c(13,"Name"),o(),m(14,"input",7),o()()(),p(15,"div",0)(16,"div",1)(17,"div",5)(18,"label",8),c(19,"Image URL"),o(),m(20,"input",9,10),o()()(),p(22,"div",0)(23,"div",1),m(24,"img",11),o()(),p(25,"div",0)(26,"div",1)(27,"div",5)(28,"label",12),c(29,"Description"),o(),m(30,"textarea",13),o()()(),p(31,"div",0)(32,"div",14),g(33,Ne,8,1,"div",15),m(34,"hr"),p(35,"div",0)(36,"div",1)(37,"button",16),f("click",function(){return r.onAddIngredient()}),c(38,"Add ingredient"),o()()()()()()()()),t&2){let d=Q(21);a(2),s("formGroup",r.recipeForm),a(3),s("disabled",r.recipeForm.invalid),a(19),s("src",d.value,x),a(9),s("ngForOf",r.controls)}},dependencies:[ee,X,ie,Y,Z,te,oe,ne,re,y],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:solid red}"]});let i=e;return i})();function Te(i,e){i&1&&(p(0,"h3"),c(1,"Please fetch Recipe from Manage tab"),o())}function Me(i,e){i&1&&(p(0,"h3"),c(1,"Please select a recipe!"),o())}var be=(()=>{let e=class e{constructor(n){this.recipeService=n,this.recipes=n.getRecipes(),this.subscription=this.recipeService.recipeChanged.subscribe(t=>{this.recipes=t},t=>{})}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(t){return new(t||e)(l(S))},e.\u0275cmp=u({type:e,selectors:[["app-recipe-start"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(t,r){t&1&&g(0,Te,2,0,"h3",0)(1,Me,2,0,"h3",0),t&2&&(s("ngIf",r.recipes.length===0),a(1),s("ngIf",r.recipes.length>0))},dependencies:[k]});let i=e;return i})();var xe=(()=>{let e=class e{constructor(n,t){this.authService=n,this.router=t}canActivate(n,t){return this.authService.user.pipe($(1),U(r=>r?!0:this.router.createUrlTree(["signup"])))}};e.\u0275fac=function(t){return new(t||e)(P(de),P(R))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var ke=[{path:"",component:Ce,canActivate:[xe],children:[{path:"",component:be},{path:"new",component:q},{path:":id",component:Re,resolve:[G]},{path:":id/edit",component:q,resolve:[G]}]}],ye=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=L({type:e}),e.\u0275inj=D({imports:[F.forChild(ke),F]});let i=e;return i})();var Ri=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=L({type:e}),e.\u0275inj=D({imports:[ae,ce,F,ye,ge]});let i=e;return i})();export{Ri as RecipesModule};
