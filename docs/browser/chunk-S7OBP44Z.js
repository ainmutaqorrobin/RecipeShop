import{a as B}from"./chunk-MCLQF2L7.js";import{A as p,Aa as v,B as L,Ba as W,C as S,D as h,F as x,G as c,H as E,I,L as A,M as V,N,P as R,Q as F,X as T,Z as D,_ as j,aa as P,ca as q,da as Q,ja as k,ka as H,l as C,la as O,n as w,o as y,oa as U,p as _,q as b,s as M,sa as G,t as m,u as f,w as d,wa as z,x as g,y as s,ya as J,z as r,za as K}from"./chunk-5MNRTRAW.js";function Z(i,t){}function $(i,t){i&1&&(s(0,"div",5),p(1,"app-loading-spinner"),r())}function ee(i,t){i&1&&(s(0,"div",16)(1,"ul",17)(2,"li",18),c(3,"Email need in valid email"),r()()())}function te(i,t){i&1&&(s(0,"div",16)(1,"ul",17)(2,"li",18),c(3,"Password must have 6 characters and more"),r()()())}function ie(i,t){if(i&1){let l=L();s(0,"form",6,7),S("ngSubmit",function(){_(l);let e=x(1),n=h();return b(n.onSubmit(e))}),s(2,"div",8)(3,"label",9),c(4,"E-mail"),r(),p(5,"input",10),r(),s(6,"div",8)(7,"label",11),c(8,"Password"),r(),p(9,"input",12),r(),s(10,"div")(11,"button",13),c(12),r(),c(13," | "),s(14,"button",14),S("click",function(){_(l);let e=h();return b(e.onSwitchMode())}),c(15),r()(),p(16,"br"),g(17,ee,4,0,"div",15)(18,te,4,0,"div",15),r()}if(i&2){let l=x(1),o=h();m(11),d("disabled",l.invalid),m(1),E(o.isLoginMode?"Login":"Sign Up"),m(3),I("Switch to ",o.isLoginMode?"Sign Up":"Login",""),m(2),d("ngIf",l.controls.email.invalid&&l.controls.email.touched),m(1),d("ngIf",l.controls.password.invalid&&l.controls.password.touched)}}var X=(()=>{let t=class t{constructor(o,e,n){this.authService=o,this.router=e,this.componentFactoryResolver=n,this.isLoginMode=!0,this.isLoading=!1,this.errorMessage=null}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(o){if(o.invalid)return;let e=o.value.email,n=o.value.password,a;this.isLoading=!this.isLoading,this.isLoginMode?a=this.authService.login(e,n):a=this.authService.signup(e,n),a.subscribe(u=>{console.log(u),this.isLoading=!this.isLoading,this.errorMessage=null,this.router.navigate(["/recipes"])},u=>{console.log(u),this.errorMessage=u,this.showErrorAlert(this.errorMessage),this.isLoading=!this.isLoading}),o.reset()}showErrorAlert(o){let e=this.componentFactoryResolver.resolveComponentFactory(K),n=this.alertHost.viewContainerRef;n.clear();let a=n.createComponent(e);a.instance.message=o,this.closeSub=a.instance.close.subscribe(()=>{this.closeSub.unsubscribe(),n.clear()})}onCloseError(){this.errorMessage=null}ngOnDestroy(){this.closeSub&&this.closeSub.unsubscribe()}};t.\u0275fac=function(e){return new(e||t)(f(B),f(G),f(M))},t.\u0275cmp=w({type:t,selectors:[["app-auth"]],viewQuery:function(e,n){if(e&1&&V(v,5),e&2){let a;A(a=N())&&(n.alertHost=a.first)}},decls:5,vars:2,consts:[["appPlaceholder",""],[1,"row"],[1,"col-xs-12","col-md-6","col-md-offset-3"],["style","text-align: center;",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[2,"text-align","center"],[3,"ngSubmit"],["authForm","ngForm"],[1,"form-group"],["for","email"],["type","text","id","email","ngModel","","name","email","required","","email","",1,"form-control"],["for","password"],["type","password","id","password","ngModel","","name","password","required","","minlength","6",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"list-group"],[1,"list-group","item"]],template:function(e,n){e&1&&(g(0,Z,0,0,"ng-template",0),s(1,"div",1)(2,"div",2),g(3,$,2,0,"div",3)(4,ie,19,5,"form",4),r()()),e&2&&(m(3),d("ngIf",n.isLoading),m(1),d("ngIf",!n.isLoading))},dependencies:[R,Q,T,D,j,k,O,H,q,P,J,v],encapsulation:2});let i=t;return i})();var ve=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y({type:t}),t.\u0275inj=C({imports:[F,U,W,z.forChild([{path:"",component:X}])]});let i=t;return i})();export{ve as AuthModule};
